<!-- Add this section to gestures.html after Quick Stats -->
<!-- Gesture Control Panel -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card border-primary">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-hand-index"></i> Gesture Desktop Control</h4>
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h5>Status: <span id="gestureStatus" class="badge bg-secondary">Checking...</span></h5>
                        <p class="text-muted mb-0">Control your desktop with hand gestures</p>
                    </div>
                    <div class="col-md-6 text-end">
                        <button id="startGestureBtn" class="btn btn-primary btn-lg me-2" onclick="startGesture()">
                            <i class="bi bi-play-fill"></i> Start Gesture Control
                        </button>
                        <button id="stopGestureBtn" class="btn btn-danger btn-lg" onclick="stopGesture()" disabled>
                            <i class="bi bi-stop-fill"></i> Stop
                        </button>
                    </div>
                </div>
                <div class="alert alert-info mt-3" id="gestureMessage" style="display: none;"></div>
            </div>
        </div>
    </div>
</div>

<script>
window.addEventListener('DOMContentLoaded', function() {
    checkGestureStatus();
    setInterval(checkGestureStatus, 5000);
});

function checkGestureStatus() {
    fetch('/api/gesture/status')
        .then(res => res.json())
        .then(data => {
            const statusBadge = document.getElementById('gestureStatus');
            const startBtn = document.getElementById('startGestureBtn');
            const stopBtn = document.getElementById('stopGestureBtn');
            
            if (data.running) {
                statusBadge.textContent = 'Running';
                statusBadge.className = 'badge bg-success';
                startBtn.disabled = true;
                stopBtn.disabled = false;
            } else {
                statusBadge.textContent = 'Stopped';
                statusBadge.className = 'badge bg-secondary';
                startBtn.disabled = false;
                stopBtn.disabled = true;
            }
        })
        .catch(err => console.error('Status check failed:', err));
}

function startGesture() {
    const messageDiv = document.getElementById('gestureMessage');
    messageDiv.style.display = 'block';
    messageDiv.className = 'alert alert-info mt-3';
    messageDiv.textContent = 'Starting gesture control...';
    
    fetch('/api/gesture/start', { method: 'POST' })
        .then(res => res.json())
        .then(data => {
            if (data.status === 'success') {
                messageDiv.className = 'alert alert-success mt-3';
                messageDiv.textContent = '✅ ' + data.message + ' - A new window should open with camera feed!';
                checkGestureStatus();
            } else {
                messageDiv.className = 'alert alert-danger mt-3';
                messageDiv.textContent = '❌ ' + data.message;
            }
        })
        .catch(err => {
            messageDiv.className = 'alert alert-danger mt-3';
            messageDiv.textContent = '❌ Error: ' + err.message;
        });
}

function stopGesture() {
    const messageDiv = document.getElementById('gestureMessage');
    messageDiv.style.display = 'block';
    messageDiv.className = 'alert alert-info mt-3';
    messageDiv.textContent = 'Stopping gesture control...';
    
    fetch('/api/gesture/stop', { method: 'POST' })
        .then(res => res.json())
        .then(data => {
            if (data.status === 'success') {
                messageDiv.className = 'alert alert-success mt-3';
                messageDiv.textContent = '✅ ' + data.message;
                checkGestureStatus();
            } else {
                messageDiv.className = 'alert alert-danger mt-3';
                messageDiv.textContent = '❌ ' + data.message;
            }
        })
        .catch(err => {
            messageDiv.className = 'alert alert-danger mt-3';
            messageDiv.textContent = '❌ Error: ' + err.message;
        });
}
</script>
